!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=function(e){t(e,window,document)}:t(jQuery,window,document)}(function(t,e,n,o){Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};var s,i=function(t){return this._options={},this.targetElement=t,this};i.start=function(t,e){var n,o,a;return n=s=new i(e),o=(o=t)||{},n._options.elementContainer=o.elementContainer||"div",a=o.classNames||{},n._options.classNameSeconds=a.seconds||"jst-seconds",n._options.classNameMinutes=a.minutes||"jst-minutes",n._options.classNameHours=a.hours||"jst-hours",n._options.classNameClearDiv=a.clearDiv||"jst-clearDiv",n._options.classNameTimeout=a.timeout||"jst-timeout",s.start(t)},i.prototype.start=function(e){var o=this,i=function(t){var e=n.createElement(o._options.elementContainer);e.className=o._options.classNameSeconds;var s=n.createElement(o._options.elementContainer);s.className=o._options.classNameMinutes;var i=n.createElement(o._options.elementContainer);i.className=o._options.classNameHours;var a=n.createElement(o._options.elementContainer);return a.className=o._options.classNameClearDiv,t.append(i).append(s).append(e).append(a)};this.targetElement.each((function(n,o){var a=this,r=t(o),c=r.attr("class");return r.on("complete",function(){clearInterval(r.intervalId)}),r.on("complete",function(){r.onComplete(r)}),r.on("complete",function(){r.addClass(a._options.classNameTimeout)}),r.on("complete",function(){e&&!0===e.loop&&s.resetTimer(r,e,c)}),r.on("pause",function(){clearInterval(r.intervalId),r.paused=!0}),r.on("resume",function(){r.paused=!1,a.startCountdown(r,{secondsLeft:r.data("timeLeft")})}),i(r),this.startCountdown(r,e)}).bind(this))},i.prototype.resetTimer=function(t,e,n){var o=0;e.loopInterval&&(o=1e3*parseInt(e.loopInterval,10)),setTimeout(function(){t.trigger("reset"),t.attr("class",n+" loop"),s.startCountdown(t,e)},o)},i.prototype.fetchSecondsLeft=function(t){var e=t.data("seconds-left"),n=t.data("minutes-left");if(Number.isFinite(e))return parseInt(e,10);if(Number.isFinite(n))return 60*parseFloat(n);throw"Missing time data"},i.prototype.startCountdown=function(t,e){e=e||{};var n=null,o=(function(){return clearInterval(n),this.clearTimer(t)}).bind(this);t.onComplete=e.onComplete||o,t.allowPause=e.allowPause||!1,t.allowPause&&t.on("click",function(){t.paused?t.trigger("resume"):t.trigger("pause")});var s=e.secondsLeft||this.fetchSecondsLeft(t),i=e.refreshRate||1e3,a=s+this.currentTime(),r=a-this.currentTime();this.setFinalValue(this.formatTimeLeft(r),t),n=setInterval((function(){(r=a-this.currentTime())<0&&(r=0),t.data("timeLeft",r),this.setFinalValue(this.formatTimeLeft(r),t)}).bind(this),i),t.intervalId=n},i.prototype.clearTimer=function(t){t.find(".jst-seconds").text("00"),t.find(".jst-minutes").text("00:"),t.find(".jst-hours").text("00:")},i.prototype.currentTime=function(){return Math.round(new Date().getTime()/1e3)},i.prototype.formatTimeLeft=function(t){var e=function(t,e){e=e||2;var n=null;return(t+="").length>=e?t:Array(e-t.length+1).join(0)+t},n=Math.floor(t/3600),o=Math.floor((t-=3600*n)/60),s=parseInt((t-=60*o)%60,10);return 0==+n&&0==+o&&0==+s?[]:[e(n),e(o),e(s)]},i.prototype.setFinalValue=function(t,e){if(0===t.length)return this.clearTimer(e),e.trigger("complete"),!1;e.find("."+this._options.classNameSeconds).html(t.pop()+"<span>:</span> "),e.find("."+this._options.classNameMinutes).html(t.pop()+"<span>:</span>"),e.find("."+this._options.classNameHours).html(t.pop()+"")},t.fn.startTimer=function(t){return this.TimerObject=i,i.start(t,this),this}});